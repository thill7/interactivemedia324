<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/ui-darkness/jquery-ui.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script>
$(document).ready(async function(){
  $("#systemName").text(navigator.platform.split(" ")[0]);
var selected = null;
var colors = ["crimson","orangered","goldenrod","lightgreen","cornflowerblue","midnightblue","indigo"];
var blinker = "<span class='cursor'>┃</span>";
var helpHtml = `<br />${"*".repeat(25)}<br />` +
`Commands:<br />`+
`<span class="helpCmd optional" data-cmd="HOME">▷ Home (clears terminal and redirects to start)</span><br />`+
`<span class="helpCmd optional" data-cmd="WORK">▷ Work (displays a list of works to view)</span><br />`+
`<span class="helpCmd optional" data-cmd="BIO">▷ Bio (about me)</span><br />`+
`<br />${"*".repeat(25)}<br />`;
var myWork = `<br />${"<span class='checker'>▚</span>".repeat(25)}<br />` +
`<span class="workSelect optional" data-project="book_project">▷ Book Project (Winter 2018 : Intro to Typography)</span><br />`+
`<span class="workSelect optional" data-project="digital_images_project">▷ Final Project (Spring 2018 : Digital Images and Photography)</span><br />`+
`<span class="workSelect optional" data-project="collection_project">▷ Collection Project (Winter 2018 : Applied Interactive Media)</span><br />`+
`<span class="workSelect optional" data-project="sss_project">▷ Single Serve Website (Winter 2018 : Applied Interactive Media)</span><br />`+
`<br />${"<span class='checker'>▚</span>".repeat(25)}<br />`;
var bio = `<br>var me = {<br>`+
  `name: 'Tanner Hill',<br>`+
  `age: <i>undefined</i>,<br>`+
  `education: {,<br>`+
  `&emsp;major: 'Computer Science',<br>`+
  `&emsp;minor: 'Art and Design',<br>`+
  `&emsp;}<br>`+
  `};<br>`;
var builtIn = {
  "HELP":function () {
    let currentText = $("#textLine").html();
    $("#textLine").html(currentText+helpHtml);
	selected = $(".optional").length;
  },
  "HOME":function () {
	$("#textLine").empty();
	selected = null;
  },
  "WORK":function () {
	let currentText = $("#textLine").html();
    $("#textLine").html(currentText+myWork);
    $(".checker").each((i, item) => {
        $(item).css("color",colors[i % 7]);
    });
	selected = $(".optional").length;
  },
  "BIO": function () {
    let currentText = $("#textLine").html();
    $("#textLine").html(currentText+bio);
  }
};
$(document).keydown((e) => {
  var key = e.which;
  if(key != 8) {
    console.log("not backspace");
	if(key === 13) {
      if($(".selected").length > 0) {
			if($(".selected").eq(0).hasClass("helpCmd")) {
				let command = $(".selected").eq(0).attr("data-cmd");
				if(command != "") {
					builtIn[command].call();
				}
			}
		else {
			var project = $(".selected").eq(0).attr("data-project");
			if(project != "") {
				if(project == "sss_project") {
					$("#project").attr("src","https://thill7.github.io/interactivemedia324/Project2/");
					$("#frameSource").html("<a href='https://thill7.github.io/interactivemedia324/Project2/' target='_blank'>▢</a>");
					$("#projectFrame").css("display","block");
				}
				else if(project == "collection_project") {
					$("#project").attr("src","https://thill7.github.io/interactivemedia324/project1/homeTemp.html");
					$("#frameSource").html("<a href='https://thill7.github.io/interactivemedia324/project1/homeTemp.html' target='_blank'>▢</a>");
					$("#projectFrame").css("display","block");
				}
			}
		}
	  }
	  else {
		  let command = $("#textLine").html().split("<br>");
		  if(Array.isArray(command)) {
			command = command[command.length - 1];
		  }
		  console.log(command);
		  if(command != "" && builtIn.hasOwnProperty(command)) {
			builtIn[command].call();
		  }
	  }
    }
	else if(key === 38 || key === 40) {
		if(key === 38) {
			if(selected != null && selected != 0) {
				console.log(selected);
				selected--;
				$(".optional").removeClass("selected");
				$(".optional").eq(selected).addClass("selected");
			}
		}
		else {
			if(selected != null && selected != $(".optional").length - 1) {
				console.log(selected);
				selected++;
				$(".optional").removeClass("selected");
				$(".optional").eq(selected).addClass("selected");
			}
		}
	}
    else {
      console.log(String.fromCharCode(key));
      if(key != undefined) {
        let currentText = $("#textLine").html();
        $("#textLine").html(currentText+String.fromCharCode(key));
      }
    }
  }
  else {
    if($("#textLine").html().length > 0) {
	  if($("#textLine").html().indexOf("<br>") > 0) {
		var text = $("#textLine").html();
		if(text[text.length - 1] != ">") {
			text = text.slice(0,(text.length - 1));
			$("#textLine").html(text);
		}
	  }
	  else {
		console.log("no br");
		let currentTextLine = $("#textLine").html();
		currentTextLine = currentTextLine.slice(0,(currentTextLine.length - 1));
		$("#textLine").html(currentTextLine);
	  }
    }
  }
});
$(document).on("click",".helpCmd",(e) => {
	var el = e.target;
	let command = $(el).attr("data-cmd");
	if(command != "") {
		builtIn[command].call();
	}
});
$(document).on("click",".workSelect",(e) => {
	var el = e.target;
	var project = $(el).attr("data-project");
	if(project != "") {
		if(project == "sss_project") {
			$("#project").attr("src","https://thill7.github.io/interactivemedia324/Project2/");
			$("#frameSource").html("<a href='https://thill7.github.io/interactivemedia324/Project2/' target='_blank'>▢</a>");
			$("#projectFrame").css("display","block");
		}
		else if(project == "collection_project") {
			$("#project").attr("src","https://thill7.github.io/interactivemedia324/project1/homeTemp.html");
			$("#frameSource").html("<a href='https://thill7.github.io/interactivemedia324/project1/homeTemp.html' target='_blank'>▢</a>");
			$("#projectFrame").css("display","block");
		}
	}
});
$("#exitButton").click(() => {
	if($("#projectFrame").css("display") == "block") {
		$("#projectFrame").css("display","none");
	}
});
$(document).on("mousemove",(e) =>{
  $(".optional").removeClass("selected");
  selected = $(".optional").length;
  $("#mouseX").text(e.pageX);
  $("#mouseY").text(e.pageY);
});
$(".cursor").on("touchstart",() => {
  var input = prompt("Enter a command.");
  if(input != "") {
    input = input.toUpperCase();
    if(builtIn.hasOwnProperty(input)) {
      builtIn[input].call();
    }
    else {
      alert("This is not a valid command! Type HELP for valid commands.");
    }
  }
  else {
    alert("This is not a valid command! Type HELP for valid commands.");
  }
});
});
</script>
<script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>
<style>
  body {
	background-color: black;
  overflow-x:hidden;
  overflow-y:hidden;
  height:100vh;
  width:100vw;
  }
  #info {
    background-color: black;
    height:10%;
    top:0;
    left:0;
    border-bottom:1vh dashed white;
    z-index:99;
    width:100%;
    position: absolute;
  }
  #terminal {
    font-family: Consolas, monospace;
    color: green;
    width: 100%;
	  height:90%;
    font-size: 5vh;
    position: absolute;
    top:10%;
    left:0;
    right:0;
    overflow-y:scroll;
    overflow-x:hidden;
  }
  @keyframes blink {
    0% {opacity:1;}
    50% {opacity:0;}
    100% {opacity:1;}
  }
  .cursor {
    animation: blink 0.5s steps(1,end) infinite alternate;
    display:inline;
    position: relative;
    top:10%;
  }
  #textLine {
    top:10%;
    position: relative;
    display:inline;
    overflow-y:scroll;
    max-height:90%;
  }
  .helpCmd:hover {
	background-color: white;
	color: black;
  }
  .workSelect:hover {
	background-color: white;
	color: black;
  }
  #projectFrame {
	display:none;
	width: 75vw;
	height: 80vh;
	position: fixed;
	top: 0vh;
	left: 12.5vw;
	z-index:999;
  }
  #project {
	position: absolute;
	bottom:0;
	left:0;
	height:75vh;
	width:75vw;

  }
  #frameInfo {
	position: absolute;
	height: 5vh;
	width: 75vw;
	top: 0;
	background-color:white;
	display: flex;
	justify-content: flex-end;
  background-color: grey;
  }
  #frameInfo button {
	padding-left:1vw;
  padding-right:1vw;
  font-size: 3vh;
  line-height:5vh;
  vertical-align: middle;
  }
  #frameInfo a {
    text-decoration:none;
    color:white;
  }
  #frameInfo a:link {
    text-decoration: none;
  }

  #frameInfo a:visited {
    text-decoration: none;
  }

  #frameInfo a:hover {
    text-decoration: none;
  }

  #frameInfo a:active {
    text-decoration: none;
  }
  #frameInfo button:first-child {
	background-color:powderblue;
	color: white;
	border-top-left-radius: 5px;
	border-bottom-left-radius: 5px;
  }
  #frameInfo button:last-child {
	background-color:crimson;
	color: white;
	border-top-right-radius: 5px;
	border-bottom-right-radius: 5px;
  }
  .selected {
	background-color: white;
	color: black;
  }
  body::before {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
  z-index: 999;
  background-size: 100% 2px, 3px 100%;
  pointer-events: none;
  }
  #info h1 {
    font-size: 2vh;
    color:white;
  }
}
</style>
</head>
<body>
  <div id="info">
    <h1>TYPE 'HELP' FOR AVAILABLE COMMANDS | x = <span id='mouseX'>0</span> && y = <span id="mouseY">0</span> && System = <span id="systemName"></span></h1>
  </div>
  <div id="terminal">

    <p id="textLine""></p><span class="cursor">┃</span>
  </div>
  <div id="projectFrame">
		<iframe id="project">
		</iframe>
		<div id="frameInfo">
				<button class="info" id="frameSource"></button>
				<button class="danger " id="exitButton"><a href="#">╳</a></button>
		</div>
	</div>
</body>
</html>
