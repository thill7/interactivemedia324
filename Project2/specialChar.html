<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/ui-darkness/jquery-ui.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script>
$(document).ready(async function(){
	
	function getChars() {
		return new Promise((resolve,reject) => {
		$.ajax({
		url:"https://www.w3.org/2001/06/utf-8-test/postscript-utf-8.html",
		dataType: "jsonp",
		success: function(textString) {
			resolve(JSON.stringify(textString));
		}
		});
		});
	}
	var allChars = await getChars();
	allChars = allChars.split("\n");
	console.log(allChars[41]);
	console.log(allChars);
	var parsedChars = [];
	var charDescriptions = [];
	for(let i = 41; i < allChars.length - 4; i++) {
		
		let charLine = allChars[i];
		let charInfoRaw = charLine.split(" ");
		let charInfo = [];
		charInfo[0] = charInfoRaw[0];
		charInfo[1] = charInfoRaw[1];
		charInfo[2] = charInfoRaw[2];
		for(let j = 3; j < charInfoRaw.length; j++) {
			charInfo[2] += (" " + charInfoRaw[j]);
		}
		parsedChars.push(charInfo);
	}
	console.log(parsedChars);
	for(let i = 0; i < parsedChars.length; i++) {
		charDescriptions.push(parsedChars[i][2]);
		console.log(parsedChars[i][2]);
	}
	console.log(charDescriptions);
	$("#inputChar").autocomplete({
		source: charDescriptions,
		autoFocus: true,
		select: function(event,ui) {
			console.log(ui.item.value);
			var charObject = parsedChars.find((obj) => {return obj[2] == ui.item.value;});
			if(charObject != undefined) {
				let character = String.fromCharCode(parseInt(charObject[0],16));
				$("#pasteArea").val(character);
				$("#pasteArea").select();
			}
			else {
				console.log("not found");
			}
		}
	});
});
</script>
<script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>
<style>
	body {
		height:100vh;
		width:100vw;
	}
	#inputCharGroup {
		height:10vh;
		top:40vh;
	}
	#inputChar {
		height:10vh;
	}
	.ui-menu {
		max-height: 20vh;
		overflow-y:scroll;
	}
	#pasteArea {
		width:20vw;
		font-size:8vh;
		text-align:center;
		position:absolute;
		left: 40vw;
		bottom:0;
		height:10vh;
	}
</style>
</head>
<body>
	<div class="input-group input-group-lg" id="inputCharGroup">
		<span class="input-group-addon">Character</span>
		<input class="form-control" type="text" id="inputChar" />
	</div>
	<input type="textarea" id="pasteArea" readonly/>
</body>
</html>
